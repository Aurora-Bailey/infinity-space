import{o as v,p as I,q as F,E as H,H as L,v as O,w as Y,x as B,y as S,z as N,A as R,B as b,U as C,C as U,D as w,F as z,e as G,G as M,S as P}from"./BI3EnnBp.js";function j(a,c,[r,s]=[0,0]){I&&r===0&&F();var i=a,f=null,l=null,u=C,k=r>0?H:0,n=!1;const D=(T,t=!0)=>{n=!0,E(t,T)},E=(T,t)=>{if(u===(u=T))return;let e=!1;if(I&&s!==-1){if(r===0){const A=i.data;A===L?s=0:A===O?s=1/0:(s=parseInt(A.substring(1)),s!==s&&(s=u?1/0:-1))}const q=s>r;!!u===q&&(i=Y(),B(i),S(!1),e=!0,s=-1)}u?(f?N(f):t&&(f=R(()=>t(i))),l&&b(l,()=>{l=null})):(l?N(l):t&&(l=R(()=>t(i,[r+1,s]))),f&&b(f,()=>{f=null})),e&&S(!0)};v(()=>{n=!1,c(D),n||E(null,null)},k),I&&(i=U)}function h(a,c){return a===c||(a==null?void 0:a[P])===c}function J(a={},c,r,s){return w(()=>{var i,f;return z(()=>{i=f,f=(s==null?void 0:s())||[],G(()=>{a!==r(...f)&&(c(a,...f),i&&h(r(...i),a)&&c(null,...i))})}),()=>{M(()=>{f&&h(r(...f),a)&&c(null,...f)})}}),a}export{J as b,j as i};
